Stored Procedure & Transactions Implementation -

/**stored procedure*//

CREATE PROCEDURE spAddSTUDENT
@STDNAME varchar(75),
@STDROLLNO INT,
@STDID INT
AS
BEGIN
  INSERT INTO dbo.STUDENT
  (
  STDNAME,
  STDROLLNO,
  STDID)

  VALUES
  (
  @STDNAME,
  @STDROLLNO,
  @STDID)

END

/**TRANSACTIONS*///
BEGIN TRAN
   INSERT INTO STUDENT (STDNAME,STDROLLNO,STDDATE) VALUES ('SIDG',27,31);
IF(@@ERROR <> 0)
BEGIN
PRINT 'RECORD NOT INSERTED IN TO STUDENT AND ROLLED BACKED'
PRINT @@IDENTITY

         ROLLBACK TRAN
END

 ELSE

 BEGIN
 PRINT 'RECORD INSERTED SUCCESSFULLY COMMITED'
 PRINT @@IDENTITY
 PRINT @@ERROR

    INSERT INTO STUDENT (STDNAME,STDROLLNO,STDDATE) VALUES ('ABC',54,97);
	PRINT @@ROWCOUNT
	IF(@@ERROR <> 0)
	          BEGIN
			     PRINT @@ERROR
				 ROLLBACK TRAN
              END
        ELSE
		   BEGIN
		      PRINT 'TRANSACTION SUCCESSFUL'
			  COMMIT TRAN
PRINT @@IDENTITY
PRINT @@ERROR
           END
   END
select * from STUDENT;


